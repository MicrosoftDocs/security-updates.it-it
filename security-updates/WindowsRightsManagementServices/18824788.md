---
TOCTitle: Distribuzione di RMS negli insiemi di strutture
Title: Distribuzione di RMS negli insiemi di strutture
ms:assetid: 'd531dfdc-efff-4eb0-8d99-f1fd19d7a963'
ms:contentKeyID: 18824788
ms:mtpsurl: 'https://technet.microsoft.com/it-it/library/Cc747685(v=WS.10)'
author: SharonSears
ms.author: SharonSears
---

Distribuzione di RMS negli insiemi di strutture
===============================================

Se la propria organizzazione include più insiemi di strutture Active Directory e si vuole abilitare l'utilizzo di RMS in tutta l'organizzazione, assicurarsi di aver configurato la rete in modo che RMS si ain grado si identificare e autenticare account utente e i gruppi di distribuzione situati in insiemi di strutture diversi.

RMS utilizza Active Directory per identificare utenti e gruppi di distribuzione. Quando la distribuzione Active Directory di un'organizzazione include più insiemi di strutture, RMS utilizza gli oggetti contatto per ottenere le identità di utenti e gruppi che fanno parte di un insieme di strutture diverso da quello del server RMS. Per farlo sono necessari tre elementi:

1.  Devono esistere server di certificazione RMS nell'altro insieme di strutture e devono essere definiti oggetti contatto per ciascun gruppo remoto.
2.  Negli insiemi di strutture devono esistere estensioni di schema contenenti oggetti contatto che permettano di collegarsi a ritroso agli insiemi di strutture che contengono gli oggetti effettivi.
3.  Negli oggetti contatto devono esistere attributi sincronizzati che permettano di collegarsi a ritroso agli insiemi di strutture che contengono gli oggetti effettivi.

Ad esempio, si supponga che vi siano gruppi definiti e gestiti in un insieme di strutture e utenti definiti e gestiti in un altro insieme di strutture. Un utente desidera assegnare diritti per il contenuto in base alle appartenenze a un determinato gruppo. In questo scenario, *RMS\_Server\_U* è il server dell'insieme di strutture che contiene gli account utente e *RMS\_Server\_G* è il server dell'insieme di strutture che contiene gli account di gruppo. Tra questi due server RMS è stato stabilito un dominio utente trusted. Perché *RMS\_Server\_U* possa estendere con successo l'appartenenza al gruppo specificato nella licenza di pubblicazione tra i confini degli insiemi di strutture, deve esistere un oggetto contatto nell'insieme di strutture Active Directory locale che rappresenta il gruppo nell'insieme di strutture remoto. RMS può eseguire query sugli attributi dell'oggetto contatto e rilevare che l'oggetto rappresenta un gruppo situato in un altro insieme di strutture, può quindi cercare un server RMS di quell'insieme di strutture e determinare se esiste una relazione di trust tra se stesso e l'altro server RMS. Quando *RMS\_Server\_U* esegue una query Active Directory per il gruppo specificato nella licenza di pubblicazione, l'oggetto contatto mostrerà che il gruppo appartiene a un altro insieme di strutture. Quando *RMS\_Server\_U* inoltra la richiesta al server RMS elencato nel punto di connessione del servizio (SCP) di quel dominio. L'SCP identifica *RMS\_Server\_G* come server di certificazione RMS per il dominio. *RMS\_Server\_U* eseguirà quindi una query *RMS\_Server\_G* per ottenere l'appartenenza al gruppo.

L'attributo in cui RMS cerca queste informazioni è **msExchOriginatingForest**. Questo attributo è installato per impostazione predefinita nello schema Active Directory se si ha Exchange Server 2003 installato nell'insieme di strutture. Questo attributo deve esistere nell'insieme di strutture di ogni schema Active Directory che parteciperà a RMS. Se non si utilizza Exchange Server 2003, è possibile aggiungere queste estensioni allo schema scaricando l'RMS Administration Toolkit. Il toolkit contiene un file schema e le istruzioni per aggiungerlo ad Active Directory.

Questi attributi devono essere sincronizzati in modo che l'oggetto contatto punti all'oggetto effettivo negli altri insiemi di strutture. Dopo aver aggiunto l'attributo allo schema Active Directory, se ne deve configurare il valore in modo che corrisponda al nome completo di dominio (FQDN) dell'insieme di strutture in cui risiede il gruppo, ad esempio corp.fabrikam.com.

Questo può essere ottenuto utilizzando Microsoft Identity Integration Server (MIIS) 2003 o Identity Integration Feature Pack (IIFP) e l'agente di gestione dell'Elenco indirizzi globale (GAL) di Active Directory.

Il server RMS locale deve essere abilitato in modo da avere privilegi sufficienti per cercare nell'Active Directory remoto e quindi chiamare le interfacce dei servizi remoti .NET situate nell'installazione RMS remota.

Per supportare l'estensione dei gruppi su più insiemi di strutture, l'account utilizzato come account di servizio di RMS in ciascun insieme di strutture deve avere anch'esso autorizzazioni di letture ed esecuzione per Active Directory. RMS concede automaticamente l'accesso in lettura Active Directory a tutti gli utenti autenticati che hanno le credenziali del dominio. Per aumentare la protezione, è possibile rimuovere questo accesso dagli elenchi di controllo di accesso discrezionale (DACL) e sostituirlo con singoli account di servizio di insiemi di strutture diversi.

A seconda che esistano oppure meno relazioni di trust di Active Directory tra gli insiemi di strutture locali e remoti, le autorizzazioni necessarie per l'account di servizio di RMS potrebbero essere diverse. Nell'elenco seguente vengono specificati i modelli di trust e le autorizzazioni necessarie:

-   **Relazione di trust bidirezionale**. L'insieme di strutture RMS locale considera attendibile ed è considerato attendibile dall'insieme di strutture in cui il gruppo è stato originato. L'account del servizio RMS del server RMS situato in ciascun insieme di strutture può essere qualsiasi account di dominio nell'insieme di strutture. Assicurarsi di aggiungere l'account del servizio RMS locale al DACL della cartella \\Inetpub\\wwwroot\\\_wmcs\\drmRemote di tutti i server RMS situati nell'insieme di strutture che ha originato il gruppo.
-   **Relazione di trust unidirezionale**. L'insieme di strutture RMS locale considera attendibile l'insieme di strutture in cui il gruppo è stato originato, ma non è considerato attendibile da tale insieme di strutture. L'account del servizio RMS di tutti i server RMS dell'organizzazione dovrebbe provenire da un account di dominio valido dell'insieme di strutture trusted. Aggiungere questo account al DACL della cartella \\Inetpub\\wwwroot\\\_wmcs\\drmRemote di tutti i server RMS situati nell'insieme di strutture che ha originato il gruppo.
-   **Nessuna relazione di trust**. Gli insiemi di strutture presenti nell'organizzazione non possono autenticare utenti e gruppi di altri insiemi di strutture. Si raccomanda di non utilizzare l'estensione di gruppo tra insiemi di strutture se l'insieme di strutture interessato non ha una relazione di trust. Tuttavia, se esiste un requisito operativo per farlo, si può abilitare questo scenario configurando l'account del servizio RMS come account di dominio valido in entrambi gli insiemi di strutture, utilizzando lo stesso nome utente e password per ognuno di essi. Inoltre, è necessario creare un account di computer locale in ciascun server front-end RMS, anch'esso con lo stesso nome utente e password degli account di dominio utilizzati per l'account del servizio RMS in entrambi gli insiemi di strutture. Questo concederà automaticamente al servizio locale autorizzazioni sufficienti per autenticarsi con l'Active Directory remoto e con il server RMS remoto.

Utilizzo dei criteri di trust RMS
---------------------------------

Quando RMS viene distribuito in un'organizzazione con più insiemi di strutture, si deve distribuire un server di certificazione RMS in ciascun insieme di strutture che ospita gli account utente che parteciperanno al sistema RMS. Se si vuole che utenti di insiemi di strutture diversi possano condividere contenuto protetto con RMS, sarà necessario configurare i criteri di trust RMS in modo che i certificati e le licenze generati dall'altro server RMS possano essere trusted. Esistono due criteri di trust utilizzabili con RMS, i domini utente trusted e i domini di pubblicazione trusted. I domini utente trusted consentono a un server RMS di eseguire il trust dei certificati per account con diritti (RAC) generati da un altro server di certificazione RMS ed emette licenze d'uso per gli utenti con RAC derivanti dall'altro server. I domini di pubblicazione trusted permettono a un server RMS di generare licenze d'uso basate su licenze di pubblicazione che specificano l'altro server licenze.

Alcune opzioni per l'utilizzo dei criteri di trust per supportare insiemi di strutture multipli sono i seguenti:

-   Un cluster di certificazione RMS in ciascun insieme di strutture con un unico cluster licenze condiviso da tutti gli utenti. Il cluster licenze RMS sarebbe configurato con un dominio utente trusted comprendente tutti i cluster di certificazione RMS. I client RMS sarebbero configurati utilizzando una chiave del registro di sistema per collegarsi al cluster licenze per ottenere le licenze d'uso.
-   Un cluster di certificazione e licenze RMS all'interno di ogni insieme di strutture con un dominio utente trusted configurato su ogni cluster per eseguire il trust dei server RMS nell'altro insieme di strutture. Ogni utente utilizzerebbe il server RMS del proprio insieme di strutture per ottenere le licenze d'uso e potrebbe rilevare il proprio server licenze attraverso il punto di connessione del servizio in Active Directory.
-   Se i fruitori di contenuto protetto con RMS fanno parte di un insieme di strutture che non ha accesso all'insieme di strutture da cui il contenuto è stato pubblicato, si può stabilire un dominio di pubblicazione trusted per far sì che il contenuto sia concesso in licenza e utilizzato. I domini di pubblicazione trusted richiedono che sia importata la chiave privata del server RMS utilizzato per pubblicare il contenuto.

Per ulteriori informazioni sulla configurazione dei criteri di trust, vedere “Gestione dei trust e dei criteri di trust” nella sezione “Utilizzo di un server RMS” di questa documentazione.
